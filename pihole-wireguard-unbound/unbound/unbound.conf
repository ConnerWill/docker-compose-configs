# https://nlnetlabs.nl/documentation/unbound/unbound.conf/

server:
  # Logging
  verbosity: 1
  log-queries: yes
  log-replies: yes

  # Network interfaces and access
  interface: 10.14.14.4
  port: 53
  do-ip4: yes
  do-ip6: no
  do-udp: yes
  do-tcp: yes

  # Access control
  access-control: 10.13.13.0/24 allow  # Allow VPN clients
  access-control: 10.14.14.0/24 allow  # Allow Docker network (Pi-hole)
  access-control: 0.0.0.0/0 refuse     # Deny all other IPs

  # Privacy and identity hiding
  hide-identity: yes
  hide-version: yes

  # Security hardening
  harden-glue: yes
  harden-dnssec-stripped: yes
  harden-referral-path: yes
  harden-below-nxdomain: yes
  use-caps-for-id: yes
  do-not-query-localhost: yes

  # DNSSEC
  auto-trust-anchor-file: "/var/lib/unbound/root.key"

  # EDNS
  edns-buffer-size: 1232

  # Performance tuning
  num-threads: 2
  so-rcvbuf: 1m
  so-sndbuf: 1m
  outgoing-range: 4096

  # Cache settings
  msg-cache-size: 50m
  rr-cache-size: 100m
  cache-min-ttl: 3600
  cache-max-ttl: 86400
  prefetch: yes

  # Block reverse lookups for RFC1918 private IP ranges
  private-address: 10.0.0.0/8
  private-address: 172.16.0.0/12
  private-address: 192.168.0.0/16
